<!DOCTYPE html><html lang="cn"><head><meta charSet="UTF-8"/><title>第七章 | Network</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="第七章 | Network"/><meta name="description" content="Personal Blog"/><meta property="og:description" content="Personal Blog"/><meta property="og:type" content="website"/><meta property="twitter:card" content="summary_large_image"/><link rel="icon" type="image/x-icon" href="/favicon.ico"/><meta name="next-head-count" content="9"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/blog/_next/static/css/188c649415dfc8d9.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/188c649415dfc8d9.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/819e775b5b3a36e7.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/819e775b5b3a36e7.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/blog/_next/static/chunks/webpack-0921f57b79154458.js" defer=""></script><script src="/blog/_next/static/chunks/framework-66d32731bdd20e83.js" defer=""></script><script src="/blog/_next/static/chunks/main-8aeaea97487321ec.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-ccbaf05611d69494.js" defer=""></script><script src="/blog/_next/static/chunks/29107295-2a9ca7f07685bf37.js" defer=""></script><script src="/blog/_next/static/chunks/814c6784-d7d96a807e1f8484.js" defer=""></script><script src="/blog/_next/static/chunks/664-2906cfc365be3e0b.js" defer=""></script><script src="/blog/_next/static/chunks/158-8b1385307a27c215.js" defer=""></script><script src="/blog/_next/static/chunks/675-dbb4e92c9bdf5be6.js" defer=""></script><script src="/blog/_next/static/chunks/460-c6727053c0ccd6ae.js" defer=""></script><script src="/blog/_next/static/chunks/pages/%5Bcollection%5D/%5B...slug%5D-163f78c8f70614ab.js" defer=""></script><script src="/blog/_next/static/meNayWSLCpwIRBFSyCCZM/_buildManifest.js" defer=""></script><script src="/blog/_next/static/meNayWSLCpwIRBFSyCCZM/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header data-theme="dark" class="style_nav-root__jrAJR" style="height:80px"><section class="style_nav-section__sS_tB"><a class="style_nav-logo__jRYAT" href="/blog"><h3>Allen Lee@Blog</h3></a><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="style_nav-menus__4aQM9"><div style="position:relative"><ul data-orientation="horizontal" dir="ltr"><li><button class="style_btn__AkQj7 style_subtle__i70rQ style_nav-trigger__ekUye" id="radix-:Rj6:-trigger-radix-:Rjj6:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rj6:-content-radix-:Rjj6:" data-radix-collection-item="">Overview <svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 15 15" aria-hidden="true" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.18179 6.18181C4.35753 6.00608 4.64245 6.00608 4.81819 6.18181L7.49999 8.86362L10.1818 6.18181C10.3575 6.00608 10.6424 6.00608 10.8182 6.18181C10.9939 6.35755 10.9939 6.64247 10.8182 6.81821L7.81819 9.81821C7.73379 9.9026 7.61934 9.95001 7.49999 9.95001C7.38064 9.95001 7.26618 9.9026 7.18179 9.81821L4.18179 6.81821C4.00605 6.64247 4.00605 6.35755 4.18179 6.18181Z" fill="currentColor"></path></svg></button></li></ul></div></nav></section></header><main data-theme="light" style="background-color:var(--colorNeutralBackground1);overflow-x:hidden;overflow-y:auto;width:100vw;height:calc(100vh - 80px)" id="main"><div class="collection_slug_Root__xztwf"><div class="styles_netPost__eLnJE" style="max-width:960px;font-family:YaHei, Helvetica, arial, sans-serif;font-size:16px"><h1>第七章</h1><p>主机通过**无线通信链路(wireless communication link)**连接到一个基站或另一台无线主机</p>
<p><strong>基站(base station)<strong>在有限网络中没有明确的对应设备，其负责向与之关联的主机发送或接收数据，并协调多个主机信号的传输。典型的有蜂窝网络中的</strong>蜂窝塔(cell tower)<strong>和 802.11 中的</strong>接入点(access point)</strong></p>
<p>与基站关联的主机以**基础设施模式(infrastructure mode)**运行，地址分配等网络服务由基站提供</p>
<p>**自组织网络(ad hoc network)**中，主机自身提供地址分配等网络服务</p>
<p>主机从一个基站到另一个基站的过程称为<strong>切换(handoff)</strong></p>
<p>无线网络大致分为</p>
<ol>
<li><em>单跳，基于基础设施</em>。如 802.11 和 4G 移动网</li>
<li><em>单跳，无基础设施</em>。如蓝牙网络和具有自组织模式的 802.11 网络</li>
<li><em>多跳，基于基础设施</em>。如无线传感网络和无线网状网络(wireless mesh network)</li>
<li><em>多跳，无基础设施</em>。如移动自组织网络(mobile ad hoc network, MANET)和车载自组织网络(vehicular ad hoc network, VANET)</li>
</ol>
<h2 id="wifi-80211-无线-lan">WiFi: 802.11 无线 LAN<a rel="noopener noreferrer external nofollow" target="_blank" href="#wifi-80211-无线-lan" class="anchor after" aria-hidden="true" aria-label="permalink" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" focusable="false"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a></h2>
<p></p>
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/ieee802.11_classification.webp"><img crossorigin="anonymous" alt="ieee802.11_classification" loading="lazy" width="1263" height="719" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 1263 719&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAI0lEQVR4nGNYunDOscN77t269OfbBwYBFgZfd8e0hOj05FgAxbgMxeYb0h4AAAAASUVORK5CYII=&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/ieee802.11_classification.webp"/></a></span><figcaption role="figcaption">ieee802.11_classification</figcaption></figure>
<p>
</p>
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/ieee802.11_lan.webp"><img crossorigin="anonymous" alt="ieee802.11_lan" loading="lazy" width="1013" height="720" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 1013 720&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMklEQVR4nAEnANj/APz28rCtqNvY1p+dmwDd1tKkn5sSEA98eXkAuri0qqWiR0JBb2xn3HIVb+PlQTkAAAAASUVORK5CYII=&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/ieee802.11_lan.webp"/></a></span><figcaption role="figcaption">ieee802.11_lan</figcaption></figure>
<p>
802.11 使用<strong>带碰撞避免的 CSMA(CSMA with collision aviodance, CSMA/CA)协议</strong>来协商多路访问</p>
<p>由于无线信道较好的比特差错率(BER)，802.11 使用<strong>链路层确认/重传(ARQ)</strong>。源站点监听到信道空闲，即等待<strong>分布式帧间间隔(Distributed Inter-Frame Space, DIFS)</strong>，然后发送帧；在目标站点收到 CRC 检验帧后，将等待<strong>短帧间间隔(Short Inter-Frame Spacing, SIFS)</strong>，然后发送一个确认帧。</p>
<p>在发送长数据时，源站点和目标站点会通过<strong>请求发送(Request to Send, RTS)帧</strong>/<strong>允许发送(Clear to Send, CTS)帧</strong>来避免碰撞
</p>
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/rts_cts_frame.webp"><img crossorigin="anonymous" alt="rts_cts_frame" loading="lazy" width="750" height="1127" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 750 1127&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAECAIAAADETxJQAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAM0lEQVR4nAEoANf/AOXh3v/990lEPADz7ur//febkYkAUExKy8S+CQAAAIN+ev/992JbVvK1FpFbod3NAAAAAElFTkSuQmCC&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/rts_cts_frame.webp"/></a></span><figcaption role="figcaption">rts_cts_frame</figcaption></figure>
<p>
802.11 运行在 2.4~2.4835GHz 的频段中。其中有 11 个部分重叠的信道。当且仅当两个信道间隔 ≥4 时才无重叠，特别是 1/6/11 是唯一的 3 个非重叠信道集合</p>
<p>同以太网类似，每个 AP 接口和主机都有一个 6 字节的 MAC 地址，存储于 802.11 网络接口卡中</p>
<p>当安装一个 AP 时，需要分配一个单字或双字的**服务集标识符(Service Set Indentifier, SSID)**和一个信道号</p>
<p>接入 AP 的步骤</p>
<ol>
<li>每个 AP 周期性的发送<strong>信标帧(beacon frame)</strong>，无线主机也周期性扫描 11 个信道来确定周围的 AP。选择被动扫描或主动扫描来监听信标帧</li>
<li>对用户鉴权。基于 MAC 地址或 AP 通过 RADIUS, DIAMETER 等协议与鉴权服务器通信</li>
<li>接入后通过 AP 发送 DHCP 发现报文获取 IP 地址
<!-- -->
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/active_or_passive_scanning.webp"><img crossorigin="anonymous" alt="active_or_passive_scanning" loading="lazy" width="1437" height="857" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 1437 857&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAIklEQVR4nGPYt2+fq62ZmABbiJcbw9+/f11tzfTUlZxtjAF/ggjbvVY97gAAAABJRU5ErkJggg==&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/active_or_passive_scanning.webp"/></a></span><figcaption role="figcaption">active_or_passive_scanning</figcaption></figure>
<!-- -->
<!-- -->
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/802.11_frame.webp"><img crossorigin="anonymous" alt="802.11_frame" loading="lazy" width="1421" height="579" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 1421 579&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAI0lEQVR4nGPw8/Eqy05+8+Dy/++vGViZGLSUJGZNaP7y/DYAnDAMd5ndM8kAAAAASUVORK5CYII=&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/802.11_frame.webp"/></a></span><figcaption role="figcaption">802.11_frame</figcaption></figure>
</li>
</ol>
<ul>
<li>类型和子类型区分关联、RTS、CTS、ACK 和数据帧</li>
<li>WEP 指示是否加密</li>
<li>持续期指 ETS/CTS 控制的持续时间</li>
<li>序号控制和运输层作用类似</li>
<li>地址 1 是接收的无线站点 MAC 地址，地址 2 是源站点 MAC 地址，地址 3 是路由器 MAC 地址，地址 4 是自组织模式互相转发时使用</li>
</ul>
<h2 id="蓝牙-802151">蓝牙: 802.15.1<a rel="noopener noreferrer external nofollow" target="_blank" href="#蓝牙-802151" class="anchor after" aria-hidden="true" aria-label="permalink" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" focusable="false"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a></h2>
<p>IEEE 802.15.1 网络有时被称为<strong>无线个人域网络(Wireless Personal Area Network, WPAN)</strong>，其链路层和物理层基于蓝牙规范</p>
<p>802.15.1 以 TDM 方式工作在 2.4GHz 无线电波段，每个时隙长度为 625μs</p>
<p>每个时隙内，发送端利用 79 个信道中的一个传输，并通过伪随机方式变更信道，该方式称为<strong>跳频扩展频谱(Frequency-Hopping Spread Spectrum, FHSS)</strong></p>
<p>802.15.1 是自组织网络，其网络称为<strong>皮可网(piconet)</strong>。其将指定一个设备为主设备，其时钟确定了皮可网的时间</p>
<h2 id="zigbee-802145">ZigBee: 802.14.5<a rel="noopener noreferrer external nofollow" target="_blank" href="#zigbee-802145" class="anchor after" aria-hidden="true" aria-label="permalink" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" focusable="false"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a></h2>
<p>802.14.5 是用于低功率、低工作周期设备的 WPAN</p>
<p>ZigBee 以超帧工作，分为活跃周期(传输数据)和非活跃周期(保存能量)
</p>
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/zigbee.webp"><img crossorigin="anonymous" alt="zigbee" loading="lazy" width="640" height="227" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 640 227&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABCAIAAAB2XpiaAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAFUlEQVR4nGP4/+fzplXz7cy0pLgYADPKBawFlrJsAAAAAElFTkSuQmCC&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/zigbee.webp"/></a></span><figcaption role="figcaption">zigbee</figcaption></figure>
<h2 id="蜂窝网">蜂窝网<a rel="noopener noreferrer external nofollow" target="_blank" href="#蜂窝网" class="anchor after" aria-hidden="true" aria-label="permalink" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" focusable="false"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a></h2>
<p>其标准是<strong>全球移动通信系统(Groupe Spécial Mobile, GSM)</strong>
</p>
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/gsm_2g.webp"><img crossorigin="anonymous" alt="gsm_2g" loading="lazy" width="1646" height="917" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 1646 917&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAJUlEQVR4nAEaAOX/ALGon/Xs4OTYzBsPAADa0seUiX2ilokfDwDK0w1oJQ8JywAAAABJRU5ErkJggg==&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/gsm_2g.webp"/></a></span><figcaption role="figcaption">gsm_2g</figcaption></figure>
<p>
BSC 用于向用户分配 BTS 无线信道，执行<strong>寻呼(paging)</strong>(找出其所在小区)</p>
<p>MSC 负责用户鉴权、管理和呼叫的建立及切换</p>
<p>2G 使用组合的 FDM/TDM 来控制多路访问</p>
<p>从 2G 起，标准就不再统一。之后讨论基于第三代合作伙伴项目(3rd Generation Partnership Project, 3GPP)研发的通用移动通信服务(Universal Mobile Telecommunications Service, UMTS)的 3G 和 4G
</p>
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/umts_3g.webp"><img crossorigin="anonymous" alt="umts_3g" loading="lazy" width="584" height="511" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 584 511&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAP0lEQVR4nAE0AMv/AOT09JqblWNlXZqbkwCbqqoUEgpMS0WIh4AAlKSkYV1VaGVZU1FIAF5sbzw3LUpFPDg1K21bFEuDCED4AAAAAElFTkSuQmCC&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/umts_3g.webp"/></a></span><figcaption role="figcaption">umts_3g</figcaption></figure>
<ul>
<li>SGSN 负责维护用户认证和切换，并提供交付/提供数据报服务</li>
<li>GGSN 起到网关作用</li>
<li>RNC 类似于 2G 的基站，既连接 MSC 与电路交换蜂窝语音网络连接，也通过 SGSN 与分组交换的因特网连接</li>
</ul>
<p>在 TDM 时隙中(兼容 2G)，UMTS 使用<strong>直接序列宽带 CDMA(Direct Sequence Wideband CDMA, DS-WCDMA)技术</strong>提供多路访问，且配合**高速分组接入(High Speed Packet Access, HSPA)**传输数据
</p>
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/umts_4g.webp"><img crossorigin="anonymous" alt="umts_4g" loading="lazy" width="1103" height="705" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 1103 705&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMElEQVR4nGP4+fObkoKMg721pKgAw+bNG0SFhRzsrS3NjBl+/fo1Y+Y0dzcnY31NABa4DfpPY5r9AAAAAElFTkSuQmCC&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/umts_4g.webp"/></a></span><figcaption role="figcaption">umts_4g</figcaption></figure>
<ul>
<li>eNodeB 类似于 3G 的 RNC。UE 的数据报在此封装，并通过 EPC 以隧道方式(类似于 IPv4-IPv6 隧道)传递给 P-GW</li>
<li>P-GW 给 UE 分配 IP 地址，并保证服务质量(QoS)的实施</li>
<li>S-GW 拦截流量和处理流量数据，并执行收费记账功能</li>
<li>MME 执行连接和移动管理</li>
<li>HSS 包含漫游、鉴权等服务</li>
</ul>
<p>LTE 中，语音和数据都承载在 IP 数据报中</p>
<p>LTE 中使用<strong>正交频分复用(Orthogonal Frequency Division Multiplexing, OFDM)技术</strong>来处理多路访问</p>
<h2 id="处理移动">处理移动<a rel="noopener noreferrer external nofollow" target="_blank" href="#处理移动" class="anchor after" aria-hidden="true" aria-label="permalink" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" focusable="false"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a></h2>
<p></p>
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/mobility.webp"><img crossorigin="anonymous" alt="mobility" loading="lazy" width="654" height="220" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 654 220&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABCAIAAAB2XpiaAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAFUlEQVR4nGP48+t7WIi/gZ66EB8rACsJBJH1BFcYAAAAAElFTkSuQmCC&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/mobility.webp"/></a></span><figcaption role="figcaption">mobility</figcaption></figure>
<p>
处于高移动性的用户使用移动 IP，其允许移动节点在网络移动时维持永久的 IP 地址</p>
<p>一个移动节点的永久居所被称为<strong>归属网络(home network)</strong>，在归属网络中代表移动节点执行移动管理功能的实体称为<strong>归属代理(home agent)</strong></p>
<p>移动节点当前所在的网络叫<strong>外部网络(foreign network, 或被访问网络(visited network))</strong>，在外部网络中帮助移动节点做移动管理功能的实体称为<strong>外部代理(foreign agent)</strong></p>
<p>外部代理 ① 为移动节点产生<strong>转交地址(Care-Of Address, COA)</strong>，COA 属于外部网络的一部分，② 和归属网络通信，使得归属代理维护移动节点本身地址(永久地址)
</p>
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/indirect_selection_of_moveable_nodes.webp"><img crossorigin="anonymous" alt="indirect_selection_of_moveable_nodes" loading="lazy" width="1012" height="717" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 1012 717&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMElEQVR4nGNwc3X48O5FYX6WkCAPw7TJfcePHcxISwoPC2RYt3a5r4+HipKcr48HAEfjD2bRBMoVAAAAAElFTkSuQmCC&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/indirect_selection_of_moveable_nodes.webp"/></a></span><figcaption role="figcaption">indirect_selection_of_moveable_nodes</figcaption></figure>
<ol>
<li>通信者使用移动节点的永久地址作为目标地址寻址</li>
<li>归属代理封装数据报，转发给外部代理</li>
<li>外部代理将 COA 地址作为目标地址发送</li>
<li>移动节点使用其永久地址发送至通信者</li>
</ol>
<p>间接路由选择会产生<strong>三角路由问题(triangle routing problem)</strong>，导致运行低效
</p>
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/direct_selection_of_moveable_nodes.webp"><img crossorigin="anonymous" alt="direct_selection_of_moveable_nodes" loading="lazy" width="573" height="479" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 573 479&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMklEQVR4nAEnANj/AHx5dcrIw4iGgQQBAADf3Ne9urWPjolRUUwA9PPuj46Jm5mUaWdig4oUG7w16wsAAAAASUVORK5CYII=&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/direct_selection_of_moveable_nodes.webp"/></a></span><figcaption role="figcaption">direct_selection_of_moveable_nodes</figcaption></figure>
<p>
1.2. 通信者代理和归属代理交互，获取移动节点的 COA
3.4. 通信者使用获取到的 COA 直接和外部代理通信</p>
<p>直接路由选择会导致移动问题，但可以使用<strong>锚外部代理(anchor foreign agent)<strong>解决。在移动节点移动时(产生新代理和新 COA)，在步骤 3 时锚外部代理将重新和新代理之间交换新 COA，然后处理数据
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/transfer_with_direct_routing.webp"><img crossorigin="anonymous" alt="transfer_with_direct_routing" loading="lazy" width="678" height="471" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 678 471&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMklEQVR4nAEnANj/ANbW1P77+3t5dK+uqgDi4t+Hh4KAf3olJCEAm5yYEA4IUVBLJiMewQUSQrZXu4oAAAAASUVORK5CYII=&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/transfer_with_direct_routing.webp"/></a></span><figcaption role="figcaption">transfer_with_direct_routing</figcaption></figure>
使移动节点中的网络层知道进入新的外部网络的过程称为</strong>代理发现(agent discovery)</strong>。其有两种方式实现：代理通告或代理请求</p>
<ul>
<li>**代理通告(agent advertisement)**使用现有的路由器发现协议的扩展协议(RFC 1256)来通告。代理周期性的在所有连接的链路上广播 ICMP 报文
<!-- -->
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/moveable_icmp_routing_message.webp"><img crossorigin="anonymous" alt="moveable_icmp_routing_message" loading="lazy" width="636" height="511" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 636 511&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMElEQVR4nGP4/ftHY31VRXnhquULGOrqqvh42fh42WbPnspQUVHq6+udmhxfXJQHAGH1EAEB3a65AAAAAElFTkSuQmCC&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/moveable_icmp_routing_message.webp"/></a></span><figcaption role="figcaption">moveable_icmp_routing_message</figcaption></figure>
</li>
<li>**代理请求(agent solicitation)**中移动节点使用类型=10 的 ICMP 报文广播。代理收到广播后将单播一个代理通告</li>
</ul>
<p>代理发现后移动节点还需要<strong>代理注册</strong>。其步骤为：移动节点向外部代理发送注册报文(UDP, 434)，外部代理向归属代理注册(UDP, 434)，归属代理鉴权，外部代理接收注册响应转发给移动节点</p></div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"matter":{"date":"2018-01-29","title":"第七章","tags":["network"],"index":7},"absPath":"/home/runner/work/blog/blog/renderer/mdx/network/seventh.mdx","type":"mdx","slug":["seventh"],"collection":"network","url":"/network/seventh"},"compiled":{"content":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst date = \"2018-01-29\", title = \"第七章\", tags = [\"network\"], index = 7;\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    strong: \"strong\",\n    ol: \"ol\",\n    li: \"li\",\n    em: \"em\",\n    h2: \"h2\",\n    a: \"a\",\n    svg: \"svg\",\n    path: \"path\",\n    img: \"img\",\n    ul: \"ul\"\n  }, props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"主机通过**无线通信链路(wireless communication link)**连接到一个基站或另一台无线主机\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsxs(_components.strong, {\n        children: [\"基站(base station)\", _jsx(_components.strong, {\n          children: \"在有限网络中没有明确的对应设备，其负责向与之关联的主机发送或接收数据，并协调多个主机信号的传输。典型的有蜂窝网络中的\"\n        }), \"蜂窝塔(cell tower)\", _jsx(_components.strong, {\n          children: \"和 802.11 中的\"\n        }), \"接入点(access point)\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"与基站关联的主机以**基础设施模式(infrastructure mode)**运行，地址分配等网络服务由基站提供\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"**自组织网络(ad hoc network)**中，主机自身提供地址分配等网络服务\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"主机从一个基站到另一个基站的过程称为\", _jsx(_components.strong, {\n        children: \"切换(handoff)\"\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"无线网络大致分为\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.em, {\n          children: \"单跳，基于基础设施\"\n        }), \"。如 802.11 和 4G 移动网\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.em, {\n          children: \"单跳，无基础设施\"\n        }), \"。如蓝牙网络和具有自组织模式的 802.11 网络\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.em, {\n          children: \"多跳，基于基础设施\"\n        }), \"。如无线传感网络和无线网状网络(wireless mesh network)\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.em, {\n          children: \"多跳，无基础设施\"\n        }), \"。如移动自组织网络(mobile ad hoc network, MANET)和车载自组织网络(vehicular ad hoc network, VANET)\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"wifi-80211-无线-lan\",\n      children: [\"WiFi: 802.11 无线 LAN\", _jsx(_components.a, {\n        className: \"anchor after\",\n        \"aria-hidden\": true,\n        \"aria-label\": \"permalink\",\n        tabIndex: \"-1\",\n        href: \"#wifi-80211-无线-lan\",\n        children: _jsx(_components.svg, {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          viewBox: \"0 0 16 16\",\n          focusable: \"false\",\n          children: _jsx(_components.path, {\n            d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\",\n            fillRule: \"evenodd\"\n          })\n        })\n      })]\n    }), \"\\n\", _jsx(_components.p, {}), \"\\n\", _jsx(_components.img, {\n      src: \"/images/network/ieee802.11_classification.webp\",\n      alt: \"ieee802.11_classification\",\n      width: \"1263\",\n      height: \"719\",\n      sizes: \"(max-width: 1263px) 100vw, 719px\",\n      blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAI0lEQVR4nGNYunDOscN77t269OfbBwYBFgZfd8e0hOj05FgAxbgMxeYb0h4AAAAASUVORK5CYII=\",\n      placeholder: \"blur\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"\\n\"\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/images/network/ieee802.11_lan.webp\",\n      alt: \"ieee802.11_lan\",\n      width: \"1013\",\n      height: \"720\",\n      sizes: \"(max-width: 1013px) 100vw, 720px\",\n      blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMklEQVR4nAEnANj/APz28rCtqNvY1p+dmwDd1tKkn5sSEA98eXkAuri0qqWiR0JBb2xn3HIVb+PlQTkAAAAASUVORK5CYII=\",\n      placeholder: \"blur\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"\\n802.11 使用\", _jsx(_components.strong, {\n        children: \"带碰撞避免的 CSMA(CSMA with collision aviodance, CSMA/CA)协议\"\n      }), \"来协商多路访问\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"由于无线信道较好的比特差错率(BER)，802.11 使用\", _jsx(_components.strong, {\n        children: \"链路层确认/重传(ARQ)\"\n      }), \"。源站点监听到信道空闲，即等待\", _jsx(_components.strong, {\n        children: \"分布式帧间间隔(Distributed Inter-Frame Space, DIFS)\"\n      }), \"，然后发送帧；在目标站点收到 CRC 检验帧后，将等待\", _jsx(_components.strong, {\n        children: \"短帧间间隔(Short Inter-Frame Spacing, SIFS)\"\n      }), \"，然后发送一个确认帧。\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"在发送长数据时，源站点和目标站点会通过\", _jsx(_components.strong, {\n        children: \"请求发送(Request to Send, RTS)帧\"\n      }), \"/\", _jsx(_components.strong, {\n        children: \"允许发送(Clear to Send, CTS)帧\"\n      }), \"来避免碰撞\\n\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/images/network/rts_cts_frame.webp\",\n      alt: \"rts_cts_frame\",\n      width: \"750\",\n      height: \"1127\",\n      sizes: \"(max-width: 750px) 100vw, 1127px\",\n      blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAECAIAAADETxJQAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAM0lEQVR4nAEoANf/AOXh3v/990lEPADz7ur//febkYkAUExKy8S+CQAAAIN+ev/992JbVvK1FpFbod3NAAAAAElFTkSuQmCC\",\n      placeholder: \"blur\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"\\n802.11 运行在 2.4~2.4835GHz 的频段中。其中有 11 个部分重叠的信道。当且仅当两个信道间隔 ≥4 时才无重叠，特别是 1/6/11 是唯一的 3 个非重叠信道集合\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"同以太网类似，每个 AP 接口和主机都有一个 6 字节的 MAC 地址，存储于 802.11 网络接口卡中\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"当安装一个 AP 时，需要分配一个单字或双字的**服务集标识符(Service Set Indentifier, SSID)**和一个信道号\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"接入 AP 的步骤\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"每个 AP 周期性的发送\", _jsx(_components.strong, {\n          children: \"信标帧(beacon frame)\"\n        }), \"，无线主机也周期性扫描 11 个信道来确定周围的 AP。选择被动扫描或主动扫描来监听信标帧\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"对用户鉴权。基于 MAC 地址或 AP 通过 RADIUS, DIAMETER 等协议与鉴权服务器通信\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"接入后通过 AP 发送 DHCP 发现报文获取 IP 地址\\n\", \"\\n\", _jsx(_components.img, {\n          src: \"/images/network/active_or_passive_scanning.webp\",\n          alt: \"active_or_passive_scanning\",\n          width: \"1437\",\n          height: \"857\",\n          sizes: \"(max-width: 1437px) 100vw, 857px\",\n          blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAIklEQVR4nGPYt2+fq62ZmABbiJcbw9+/f11tzfTUlZxtjAF/ggjbvVY97gAAAABJRU5ErkJggg==\",\n          placeholder: \"blur\"\n        }), \"\\n\", \"\\n\", \"\\n\", _jsx(_components.img, {\n          src: \"/images/network/802.11_frame.webp\",\n          alt: \"802.11_frame\",\n          width: \"1421\",\n          height: \"579\",\n          sizes: \"(max-width: 1421px) 100vw, 579px\",\n          blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAI0lEQVR4nGPw8/Eqy05+8+Dy/++vGViZGLSUJGZNaP7y/DYAnDAMd5ndM8kAAAAASUVORK5CYII=\",\n          placeholder: \"blur\"\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"类型和子类型区分关联、RTS、CTS、ACK 和数据帧\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"WEP 指示是否加密\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"持续期指 ETS/CTS 控制的持续时间\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"序号控制和运输层作用类似\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"地址 1 是接收的无线站点 MAC 地址，地址 2 是源站点 MAC 地址，地址 3 是路由器 MAC 地址，地址 4 是自组织模式互相转发时使用\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"蓝牙-802151\",\n      children: [\"蓝牙: 802.15.1\", _jsx(_components.a, {\n        className: \"anchor after\",\n        \"aria-hidden\": true,\n        \"aria-label\": \"permalink\",\n        tabIndex: \"-1\",\n        href: \"#蓝牙-802151\",\n        children: _jsx(_components.svg, {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          viewBox: \"0 0 16 16\",\n          focusable: \"false\",\n          children: _jsx(_components.path, {\n            d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\",\n            fillRule: \"evenodd\"\n          })\n        })\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"IEEE 802.15.1 网络有时被称为\", _jsx(_components.strong, {\n        children: \"无线个人域网络(Wireless Personal Area Network, WPAN)\"\n      }), \"，其链路层和物理层基于蓝牙规范\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"802.15.1 以 TDM 方式工作在 2.4GHz 无线电波段，每个时隙长度为 625μs\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"每个时隙内，发送端利用 79 个信道中的一个传输，并通过伪随机方式变更信道，该方式称为\", _jsx(_components.strong, {\n        children: \"跳频扩展频谱(Frequency-Hopping Spread Spectrum, FHSS)\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"802.15.1 是自组织网络，其网络称为\", _jsx(_components.strong, {\n        children: \"皮可网(piconet)\"\n      }), \"。其将指定一个设备为主设备，其时钟确定了皮可网的时间\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"zigbee-802145\",\n      children: [\"ZigBee: 802.14.5\", _jsx(_components.a, {\n        className: \"anchor after\",\n        \"aria-hidden\": true,\n        \"aria-label\": \"permalink\",\n        tabIndex: \"-1\",\n        href: \"#zigbee-802145\",\n        children: _jsx(_components.svg, {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          viewBox: \"0 0 16 16\",\n          focusable: \"false\",\n          children: _jsx(_components.path, {\n            d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\",\n            fillRule: \"evenodd\"\n          })\n        })\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"802.14.5 是用于低功率、低工作周期设备的 WPAN\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ZigBee 以超帧工作，分为活跃周期(传输数据)和非活跃周期(保存能量)\\n\"\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/images/network/zigbee.webp\",\n      alt: \"zigbee\",\n      width: \"640\",\n      height: \"227\",\n      sizes: \"(max-width: 640px) 100vw, 227px\",\n      blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABCAIAAAB2XpiaAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAFUlEQVR4nGP4/+fzplXz7cy0pLgYADPKBawFlrJsAAAAAElFTkSuQmCC\",\n      placeholder: \"blur\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"蜂窝网\",\n      children: [\"蜂窝网\", _jsx(_components.a, {\n        className: \"anchor after\",\n        \"aria-hidden\": true,\n        \"aria-label\": \"permalink\",\n        tabIndex: \"-1\",\n        href: \"#蜂窝网\",\n        children: _jsx(_components.svg, {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          viewBox: \"0 0 16 16\",\n          focusable: \"false\",\n          children: _jsx(_components.path, {\n            d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\",\n            fillRule: \"evenodd\"\n          })\n        })\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"其标准是\", _jsx(_components.strong, {\n        children: \"全球移动通信系统(Groupe Spécial Mobile, GSM)\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/images/network/gsm_2g.webp\",\n      alt: \"gsm_2g\",\n      width: \"1646\",\n      height: \"917\",\n      sizes: \"(max-width: 1646px) 100vw, 917px\",\n      blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAIAAADwyuo0AAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAJUlEQVR4nAEaAOX/ALGon/Xs4OTYzBsPAADa0seUiX2ilokfDwDK0w1oJQ8JywAAAABJRU5ErkJggg==\",\n      placeholder: \"blur\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"\\nBSC 用于向用户分配 BTS 无线信道，执行\", _jsx(_components.strong, {\n        children: \"寻呼(paging)\"\n      }), \"(找出其所在小区)\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"MSC 负责用户鉴权、管理和呼叫的建立及切换\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"2G 使用组合的 FDM/TDM 来控制多路访问\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"从 2G 起，标准就不再统一。之后讨论基于第三代合作伙伴项目(3rd Generation Partnership Project, 3GPP)研发的通用移动通信服务(Universal Mobile Telecommunications Service, UMTS)的 3G 和 4G\\n\"\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/images/network/umts_3g.webp\",\n      alt: \"umts_3g\",\n      width: \"584\",\n      height: \"511\",\n      sizes: \"(max-width: 584px) 100vw, 511px\",\n      blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAP0lEQVR4nAE0AMv/AOT09JqblWNlXZqbkwCbqqoUEgpMS0WIh4AAlKSkYV1VaGVZU1FIAF5sbzw3LUpFPDg1K21bFEuDCED4AAAAAElFTkSuQmCC\",\n      placeholder: \"blur\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"SGSN 负责维护用户认证和切换，并提供交付/提供数据报服务\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"GGSN 起到网关作用\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"RNC 类似于 2G 的基站，既连接 MSC 与电路交换蜂窝语音网络连接，也通过 SGSN 与分组交换的因特网连接\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"在 TDM 时隙中(兼容 2G)，UMTS 使用\", _jsx(_components.strong, {\n        children: \"直接序列宽带 CDMA(Direct Sequence Wideband CDMA, DS-WCDMA)技术\"\n      }), \"提供多路访问，且配合**高速分组接入(High Speed Packet Access, HSPA)**传输数据\\n\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/images/network/umts_4g.webp\",\n      alt: \"umts_4g\",\n      width: \"1103\",\n      height: \"705\",\n      sizes: \"(max-width: 1103px) 100vw, 705px\",\n      blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMElEQVR4nGP4+fObkoKMg721pKgAw+bNG0SFhRzsrS3NjBl+/fo1Y+Y0dzcnY31NABa4DfpPY5r9AAAAAElFTkSuQmCC\",\n      placeholder: \"blur\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"eNodeB 类似于 3G 的 RNC。UE 的数据报在此封装，并通过 EPC 以隧道方式(类似于 IPv4-IPv6 隧道)传递给 P-GW\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"P-GW 给 UE 分配 IP 地址，并保证服务质量(QoS)的实施\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"S-GW 拦截流量和处理流量数据，并执行收费记账功能\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"MME 执行连接和移动管理\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"HSS 包含漫游、鉴权等服务\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"LTE 中，语音和数据都承载在 IP 数据报中\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"LTE 中使用\", _jsx(_components.strong, {\n        children: \"正交频分复用(Orthogonal Frequency Division Multiplexing, OFDM)技术\"\n      }), \"来处理多路访问\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"处理移动\",\n      children: [\"处理移动\", _jsx(_components.a, {\n        className: \"anchor after\",\n        \"aria-hidden\": true,\n        \"aria-label\": \"permalink\",\n        tabIndex: \"-1\",\n        href: \"#处理移动\",\n        children: _jsx(_components.svg, {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          viewBox: \"0 0 16 16\",\n          focusable: \"false\",\n          children: _jsx(_components.path, {\n            d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\",\n            fillRule: \"evenodd\"\n          })\n        })\n      })]\n    }), \"\\n\", _jsx(_components.p, {}), \"\\n\", _jsx(_components.img, {\n      src: \"/images/network/mobility.webp\",\n      alt: \"mobility\",\n      width: \"654\",\n      height: \"220\",\n      sizes: \"(max-width: 654px) 100vw, 220px\",\n      blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABCAIAAAB2XpiaAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAFUlEQVR4nGP48+t7WIi/gZ66EB8rACsJBJH1BFcYAAAAAElFTkSuQmCC\",\n      placeholder: \"blur\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"\\n处于高移动性的用户使用移动 IP，其允许移动节点在网络移动时维持永久的 IP 地址\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"一个移动节点的永久居所被称为\", _jsx(_components.strong, {\n        children: \"归属网络(home network)\"\n      }), \"，在归属网络中代表移动节点执行移动管理功能的实体称为\", _jsx(_components.strong, {\n        children: \"归属代理(home agent)\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"移动节点当前所在的网络叫\", _jsx(_components.strong, {\n        children: \"外部网络(foreign network, 或被访问网络(visited network))\"\n      }), \"，在外部网络中帮助移动节点做移动管理功能的实体称为\", _jsx(_components.strong, {\n        children: \"外部代理(foreign agent)\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"外部代理 ① 为移动节点产生\", _jsx(_components.strong, {\n        children: \"转交地址(Care-Of Address, COA)\"\n      }), \"，COA 属于外部网络的一部分，② 和归属网络通信，使得归属代理维护移动节点本身地址(永久地址)\\n\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/images/network/indirect_selection_of_moveable_nodes.webp\",\n      alt: \"indirect_selection_of_moveable_nodes\",\n      width: \"1012\",\n      height: \"717\",\n      sizes: \"(max-width: 1012px) 100vw, 717px\",\n      blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMElEQVR4nGNwc3X48O5FYX6WkCAPw7TJfcePHcxISwoPC2RYt3a5r4+HipKcr48HAEfjD2bRBMoVAAAAAElFTkSuQmCC\",\n      placeholder: \"blur\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"通信者使用移动节点的永久地址作为目标地址寻址\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"归属代理封装数据报，转发给外部代理\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"外部代理将 COA 地址作为目标地址发送\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"移动节点使用其永久地址发送至通信者\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"间接路由选择会产生\", _jsx(_components.strong, {\n        children: \"三角路由问题(triangle routing problem)\"\n      }), \"，导致运行低效\\n\"]\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/images/network/direct_selection_of_moveable_nodes.webp\",\n      alt: \"direct_selection_of_moveable_nodes\",\n      width: \"573\",\n      height: \"479\",\n      sizes: \"(max-width: 573px) 100vw, 479px\",\n      blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMklEQVR4nAEnANj/AHx5dcrIw4iGgQQBAADf3Ne9urWPjolRUUwA9PPuj46Jm5mUaWdig4oUG7w16wsAAAAASUVORK5CYII=\",\n      placeholder: \"blur\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"\\n1.2. 通信者代理和归属代理交互，获取移动节点的 COA\\n3.4. 通信者使用获取到的 COA 直接和外部代理通信\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"直接路由选择会导致移动问题，但可以使用\", _jsxs(_components.strong, {\n        children: [\"锚外部代理(anchor foreign agent)\", _jsxs(_components.strong, {\n          children: [\"解决。在移动节点移动时(产生新代理和新 COA)，在步骤 3 时锚外部代理将重新和新代理之间交换新 COA，然后处理数据\\n\", _jsx(_components.img, {\n            src: \"/images/network/transfer_with_direct_routing.webp\",\n            alt: \"transfer_with_direct_routing\",\n            width: \"678\",\n            height: \"471\",\n            sizes: \"(max-width: 678px) 100vw, 471px\",\n            blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMklEQVR4nAEnANj/ANbW1P77+3t5dK+uqgDi4t+Hh4KAf3olJCEAm5yYEA4IUVBLJiMewQUSQrZXu4oAAAAASUVORK5CYII=\",\n            placeholder: \"blur\"\n          }), \"\\n使移动节点中的网络层知道进入新的外部网络的过程称为\"]\n        }), \"代理发现(agent discovery)\"]\n      }), \"。其有两种方式实现：代理通告或代理请求\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"**代理通告(agent advertisement)**使用现有的路由器发现协议的扩展协议(RFC 1256)来通告。代理周期性的在所有连接的链路上广播 ICMP 报文\\n\", \"\\n\", _jsx(_components.img, {\n          src: \"/images/network/moveable_icmp_routing_message.webp\",\n          alt: \"moveable_icmp_routing_message\",\n          width: \"636\",\n          height: \"511\",\n          sizes: \"(max-width: 636px) 100vw, 511px\",\n          blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAIAAAA7ljmRAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAMElEQVR4nGP4/ftHY31VRXnhquULGOrqqvh42fh42WbPnspQUVHq6+udmhxfXJQHAGH1EAEB3a65AAAAAElFTkSuQmCC\",\n          placeholder: \"blur\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"**代理请求(agent solicitation)**中移动节点使用类型=10 的 ICMP 报文广播。代理收到广播后将单播一个代理通告\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"代理发现后移动节点还需要\", _jsx(_components.strong, {\n        children: \"代理注册\"\n      }), \"。其步骤为：移动节点向外部代理发送注册报文(UDP, 434)，外部代理向归属代理注册(UDP, 434)，归属代理鉴权，外部代理接收注册响应转发给移动节点\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = props.components || ({});\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  date,\n  title,\n  tags,\n  index,\n  default: MDXContent\n};\n","toc":[{"depth":2,"value":"WiFi: 802.11 无线 LAN","id":"wifi-80211-无线-lan"},{"depth":2,"value":"蓝牙: 802.15.1","id":"蓝牙-802151"},{"depth":2,"value":"ZigBee: 802.14.5","id":"zigbee-802145"},{"depth":2,"value":"蜂窝网","id":"蜂窝网"},{"depth":2,"value":"处理移动","id":"处理移动"}]},"overview":[{"length":21,"name":"archive"},{"length":15,"name":"graphics"},{"length":1,"name":"math"},{"length":8,"name":"network"}]},"__N_SSG":true},"page":"/[collection]/[...slug]","query":{"collection":"network","slug":["seventh"]},"buildId":"meNayWSLCpwIRBFSyCCZM","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>