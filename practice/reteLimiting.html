<!DOCTYPE html><html lang="cn"><head><meta charSet="UTF-8"/><title>Allen Blog</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="Allen Blog"/><meta name="description" content="Personal Blog"/><meta property="og:description" content="Personal Blog"/><meta property="og:type" content="website"/><meta property="twitter:card" content="summary_large_image"/><link rel="icon" type="image/x-icon" href="/favicon.ico"/><meta name="next-head-count" content="9"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/blog/_next/static/css/660e458111ee01f4.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/660e458111ee01f4.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/ee98c52c7a759a2f.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/ee98c52c7a759a2f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/blog/_next/static/chunks/webpack-6965b024cefed38b.js" defer=""></script><script src="/blog/_next/static/chunks/framework-49c6cecf1f6d5795.js" defer=""></script><script src="/blog/_next/static/chunks/main-c4ae4cd412b87996.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-ae897f29056b30d9.js" defer=""></script><script src="/blog/_next/static/chunks/29107295-2a9ca7f07685bf37.js" defer=""></script><script src="/blog/_next/static/chunks/117b9d7f-c05aadfcc1af22be.js" defer=""></script><script src="/blog/_next/static/chunks/664-d254d21a6fe56bff.js" defer=""></script><script src="/blog/_next/static/chunks/712-0ac9ab5907aab179.js" defer=""></script><script src="/blog/_next/static/chunks/pages/practice/reteLimiting-89911e990882b70f.js" defer=""></script><script src="/blog/_next/static/D7x4DkC9fYkIpJlQ3dnHJ/_buildManifest.js" defer=""></script><script src="/blog/_next/static/D7x4DkC9fYkIpJlQ3dnHJ/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header data-theme="dark" class="style_fluent-nav__g_gBy" style="height:80px"><section class="style_nav-section__sS_tB"><a class="style_nav-logo__jRYAT" href="/blog"><h3>Allen Lee@Collections</h3></a><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="style_nav-menus__4aQM9"><div style="position:relative"><ul data-orientation="horizontal" dir="ltr"><li><button class="style_btn__AkQj7 style_subtle__i70rQ style_nav-trigger__ekUye" id="radix-:Rj6:-trigger-overview" data-state="closed" aria-expanded="false" aria-controls="radix-:Rj6:-content-overview" data-radix-collection-item="">Overview <svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 15 15" aria-hidden="true" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.18179 6.18181C4.35753 6.00608 4.64245 6.00608 4.81819 6.18181L7.49999 8.86362L10.1818 6.18181C10.3575 6.00608 10.6424 6.00608 10.8182 6.18181C10.9939 6.35755 10.9939 6.64247 10.8182 6.81821L7.81819 9.81821C7.73379 9.9026 7.61934 9.95001 7.49999 9.95001C7.38064 9.95001 7.26618 9.9026 7.18179 9.81821L4.18179 6.81821C4.00605 6.64247 4.00605 6.35755 4.18179 6.18181Z" fill="currentColor"></path></svg></button></li></ul></div></nav></section></header><main data-theme="light" style="background-color:var(--colorNeutralBackground1);overflow-x:hidden;overflow-y:auto;width:100vw;height:calc(100vh - 80px)" id="main"><div style="display:flex;flex-direction:column;justify-content:space-between;height:100%;align-items:center"><section style="padding:2em 3em 1em;width:72vw;max-width:800px;min-width:600px"><label>Reference:<a href="https://github.com/Sagyam/tools" target="__blank">https://github.com/Sagyam/tools</a></label></section><section style="padding:2em 3em 1em;width:72vw;max-width:800px;min-width:600px"><h2>漏水桶</h2><ul><li>当收到请求时：<ul style="list-style:decimal;padding:revert"><li>以设定的<strong>恒定速率</strong>处理</li><li>如果新请求到达时存储桶已满，则会丢弃该请求</li></ul></li><li>请求以固定的速率处理，因此它适用于需要稳定流出速率的用例</li></ul><div class="style_root__uBCMe"><h3>Leaky Bucket Rate Limiting Simulator</h3><div class="style_controls__kQxhG style_card__pYSC1"><div><label>Bucket Size<input type="number" min="1" max="20" value="10"/></label><sub>10<!-- --> tokens</sub></div><div><label>Fill Rate (req/sec)<input type="number" min="1" max="10" value="1"/></label><sub>1<!-- -->/second</sub></div><div><button class="style_btn__AkQj7">Send Request</button><button class="style_btn__AkQj7">Pause</button><button class="style_btn__AkQj7">Reset</button></div></div><div class="style_container__cRL60 style_card__pYSC1"><div data-mode-cs="true"><div><div></div><span>User</span></div><div class="style_leakyBucket___Vm8D"><div style="background:linear-gradient(
    to top,
    #aaFa 0%,
    #aaFa 0%,
    transparent 0%,
    transparent 100%
  )"><div><div style="background:transparent"></div><div style="background:transparent"></div><div style="background:transparent"></div><div style="background:transparent"></div><div style="background:transparent"></div><div style="background:transparent"></div><div style="background:transparent"></div><div style="background:transparent"></div><div style="background:transparent"></div><div style="background:transparent"></div></div><div><div></div></div></div><span>Bucket (<!-- -->0<!-- -->/<!-- -->10<!-- -->)</span></div><div style="display:flex;flex-direction:column"><div></div><span>Server</span><span>1<!-- --> req/s</span></div></div><div><h4>Request Status:</h4><div style="background:#afa"><span>Moving to Bucket</span></div><div style="background:#aff"><span>Accepted &amp; Processed</span></div><div style="background:#faa"><span>Dropped (No Tokens)</span></div></div></div><div class="style_stats__vZ35M"><div class="style_card__pYSC1"><div>0</div><sub>Processed</sub></div><div class="style_card__pYSC1"><div>0</div><sub>Dropped</sub></div><div class="style_card__pYSC1"><div>0</div><sub>In Bucket</sub></div></div></div></section><section style="padding:2em 3em 1em;width:72vw;max-width:800px;min-width:600px"><h2>令牌桶</h2><ul><li>令牌以固定速率添加到存储桶中</li><li>当收到请求时：<ul style="list-style:decimal;padding:revert"><li>如果令牌可用，则会将其从存储桶中删除并允许请求</li><li>如果没有可用的令牌，则请求将被拒绝或延迟</li></ul></li><li>令牌桶允许在短时间内进行突发流量</li></ul><div class="style_root__uBCMe"><h3>Token Bucket Rate Limiter Simulator</h3><div class="style_controls__kQxhG style_card__pYSC1"><div><label>Bucket Capacity<input type="number" min="1" max="20" value="15"/></label><sub>15<!-- --> tokens</sub></div><div><label>Refill Rate<input type="number" min="1" max="5" value="3"/></label><sub>3<!-- -->/second</sub></div><div><button class="style_btn__AkQj7">Send Request</button><button class="style_btn__AkQj7">Pause</button><button class="style_btn__AkQj7">Reset</button></div></div><div class="style_container__cRL60 style_card__pYSC1"><div data-mode-cs="true"><div><div></div><span>User</span></div><div class="style_tokensBucket__VuRYX"><div><div class="style_request__O652Z" style="transition-delay:0ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:30ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:60ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:90ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:120ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:150ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:180ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:210ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:240ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:270ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:300ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:330ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:360ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:390ms;background:#afa;opacity:1"></div><div class="style_request__O652Z" style="transition-delay:420ms;background:#afa;opacity:1"></div></div><div>15<!-- -->/<!-- -->15<!-- --> tokens</div></div><div style="display:flex;flex-direction:column"><div></div><span>Server</span></div></div><div></div></div><div class="style_stats__vZ35M" style="grid-template-columns:repeat(4, minmax(0, 1fr))"><div class="style_card__pYSC1"><div>15</div><sub>Current Tokens</sub></div><div class="style_card__pYSC1"><div>0</div><sub>Processed</sub></div><div class="style_card__pYSC1"><div>0</div><sub>Dropped</sub></div><div class="style_card__pYSC1"><div>100<!-- -->%</div><sub>Success Rate</sub></div></div></div></section><section style="padding:2em 3em 1em;width:72vw;max-width:800px;min-width:600px"><h2>固定窗口</h2><ul><li>当收到请求时：<ul style="list-style:decimal;padding:revert"><li>计数器跟踪当前窗口中每个客户端/IP 的请求数</li><li>如果计数超过限制，则进一步的请求将被拒绝，直到下一个窗口</li></ul></li><li>窗口边缘的流量激增可能导致超过允许配额的请求被通过</li></ul><div class="style_root__uBCMe"><h3>Fixed Window Counter Rate Limiter</h3><div class="style_controls__kQxhG style_card__pYSC1"><div><label>Window Limit (requests)<input type="number" min="1" max="20" value="5"/></label><sub>5<!-- --> requests per window</sub></div><div><label>Window Duration (ms)<input type="number" min="500" max="5000" step="100" value="3000"/></label><sub>3000<!-- --> ms per window</sub></div><div><button class="style_btn__AkQj7">Start<!-- --> Timer</button><button class="style_btn__AkQj7">Send Request</button><button class="style_btn__AkQj7">Reset</button></div></div><div class="style_container__cRL60 style_card__pYSC1"><div style="position:absolute;inset:0"><svg style="position:absolute;inset:0;width:100%;height:100%"><defs><pattern id="grid" width="360" height="20" patternUnits="userSpaceOnUse"><path d="M 360 0 L 0 0 0 20" fill="none" stroke="#999" stroke-width="1" stroke-dasharray="2,2"></path></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"></rect><line x1="0" y1="0" x2="0" y2="100%" stroke="#3b82f6" stroke-width="2"></line><rect x="0" y="0" width="360" height="100%" fill="rgba(59, 130, 246, 0.1)" stroke="rgba(59, 130, 246, 0.3)" stroke-width="2"></rect></svg><div style="position:absolute;top:0;right:0;left:0;display:flex;justify-content:space-evenly"><div>0.0<!-- -->s</div><div>1.0<!-- -->s</div><div>2.0<!-- -->s</div><div>3.0<!-- -->s</div><div>4.0<!-- -->s</div><div>5.0<!-- -->s</div></div></div><div><h4>Request Status:</h4><div style="background:#ffa"><span class="text-green-500">Served</span></div><div style="background:#faa"><span class="text-red-500">Rejected</span></div><div style="background:#aafa"><span class="text-purple-500">Current Window</span></div></div></div><div class="style_stats__vZ35M"><div class="style_card__pYSC1"><div>0</div><sub>Served</sub></div><div class="style_card__pYSC1"><div>0</div><sub>Rejected</sub></div><div class="style_card__pYSC1"><div>0</div><sub>Current Window</sub></div></div></div></section><section style="padding:2em 3em 1em;width:72vw;max-width:800px;min-width:600px"><h2>滑动窗口</h2><ul><li>当收到请求时：<ul style="list-style:decimal;padding:revert"><li>计算在过去 X 秒内发出的请求数</li><li>如果低于限制，则允许并记录请求</li><li>否则，它将被拒绝</li></ul></li><li>它是实际速率的近似值，因为它假设前一个窗口的请求是均匀分布的(但在4亿个请求中，估计只有0.003%的请求会被错误地允许或限制速率)</li></ul><div class="style_root__uBCMe"><h3>Sliding Window Rate Limiter</h3><div class="style_controls__kQxhG style_card__pYSC1"><div><label>Window Limit (requests)<input type="number" min="1" max="20" value="5"/></label><sub>5<!-- --> requests per window</sub></div><div><label>Window Duration (ms)<input type="number" min="1000" max="10000" step="500" value="3000"/></label><sub>3000<!-- --> ms per window</sub></div><div><button class="style_btn__AkQj7">Start<!-- --> Timer</button><button class="style_btn__AkQj7">Send Request</button><button class="style_btn__AkQj7">Reset</button></div></div><div class="style_container__cRL60 style_card__pYSC1"><div style="position:absolute;inset:0"><svg style="position:absolute;inset:0;width:100%;height:100%"><defs><pattern id="timeGrid" width="60" height="20" patternUnits="userSpaceOnUse"><path d="M 60 0 L 0 0 0 20" fill="none" stroke="#999" stroke-width="1"></path></pattern></defs><rect width="100%" height="100%" fill="url(#timeGrid)"></rect><line x1="0" y1="0" x2="0" y2="300" stroke="#8b5cf6" stroke-width="3"></line><rect x="0" y="0" width="300" height="300" fill="rgba(139, 92, 246, 0.15)" stroke="rgba(139, 92, 246, 0.4)" stroke-width="2" stroke-dasharray="5,5"></rect><line x1="0" y1="0" x2="0" y2="300" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="3,3"></line></svg><div style="position:absolute;top:2em;left:0;right:0" class="absolute top-2 left-0 right-0"><div style="position:absolute;color:purple;background:white;left:10px;transform:translateX(-50%)">Window Start</div><div style="position:absolute;color:purple;background:white;top:2em;left:0px;transform:translateX(-50%)">Now</div></div><div style="position:absolute;top:0;right:0;left:0;display:flex;justify-content:space-evenly"><div>0.0<!-- -->s</div><div>1.0<!-- -->s</div><div>2.0<!-- -->s</div><div>3.0<!-- -->s</div><div>4.0<!-- -->s</div><div>5.0<!-- -->s</div><div>6.0<!-- -->s</div></div></div><div><h4>Request Status:</h4><div style="background:#ffa"><span class="text-green-500">Served</span></div><div style="background:#faa"><span class="text-red-500">Rejected</span></div><div style="background:#aafa"><span class="text-purple-500">Current Window</span></div></div></div><div class="style_stats__vZ35M"><div class="style_card__pYSC1"><div>0</div><sub>Served</sub></div><div class="style_card__pYSC1"><div>0</div><sub>Rejected</sub></div><div class="style_card__pYSC1"><div>0</div><sub>In Sliding Window</sub></div></div></div></section></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"overview":[{"length":22,"name":"archive"},{"length":15,"name":"graphics"},{"length":1,"name":"math"},{"length":8,"name":"network"},{"length":2,"name":"sstory"},{"name":"practice","length":7}]},"__N_SSG":true},"page":"/practice/reteLimiting","query":{},"buildId":"D7x4DkC9fYkIpJlQ3dnHJ","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>