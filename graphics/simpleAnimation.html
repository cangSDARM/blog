<!DOCTYPE html><html lang="cn"><head><meta charSet="UTF-8"/><title>Graphics Programming(八) —— 简单动画 | Graphics</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="Graphics Programming(八) —— 简单动画 | Graphics"/><meta name="description" content="Personal Blog"/><meta property="og:description" content="Personal Blog"/><meta property="og:type" content="website"/><meta property="twitter:card" content="summary_large_image"/><link rel="icon" type="image/x-icon" href="/favicon.ico"/><meta name="next-head-count" content="9"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/blog/_next/static/css/188c649415dfc8d9.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/188c649415dfc8d9.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/819e775b5b3a36e7.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/819e775b5b3a36e7.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/blog/_next/static/chunks/webpack-0921f57b79154458.js" defer=""></script><script src="/blog/_next/static/chunks/framework-66d32731bdd20e83.js" defer=""></script><script src="/blog/_next/static/chunks/main-8aeaea97487321ec.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-ccbaf05611d69494.js" defer=""></script><script src="/blog/_next/static/chunks/29107295-2a9ca7f07685bf37.js" defer=""></script><script src="/blog/_next/static/chunks/814c6784-d7d96a807e1f8484.js" defer=""></script><script src="/blog/_next/static/chunks/664-2906cfc365be3e0b.js" defer=""></script><script src="/blog/_next/static/chunks/158-8b1385307a27c215.js" defer=""></script><script src="/blog/_next/static/chunks/675-dbb4e92c9bdf5be6.js" defer=""></script><script src="/blog/_next/static/chunks/460-c6727053c0ccd6ae.js" defer=""></script><script src="/blog/_next/static/chunks/pages/%5Bcollection%5D/%5B...slug%5D-163f78c8f70614ab.js" defer=""></script><script src="/blog/_next/static/meNayWSLCpwIRBFSyCCZM/_buildManifest.js" defer=""></script><script src="/blog/_next/static/meNayWSLCpwIRBFSyCCZM/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header data-theme="dark" class="style_nav-root__jrAJR" style="height:80px"><section class="style_nav-section__sS_tB"><a class="style_nav-logo__jRYAT" href="/blog"><h3>Allen Lee@Blog</h3></a><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="style_nav-menus__4aQM9"><div style="position:relative"><ul data-orientation="horizontal" dir="ltr"><li><button class="style_btn__AkQj7 style_subtle__i70rQ style_nav-trigger__ekUye" id="radix-:Rj6:-trigger-radix-:Rjj6:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rj6:-content-radix-:Rjj6:" data-radix-collection-item="">Overview <svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 15 15" aria-hidden="true" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.18179 6.18181C4.35753 6.00608 4.64245 6.00608 4.81819 6.18181L7.49999 8.86362L10.1818 6.18181C10.3575 6.00608 10.6424 6.00608 10.8182 6.18181C10.9939 6.35755 10.9939 6.64247 10.8182 6.81821L7.81819 9.81821C7.73379 9.9026 7.61934 9.95001 7.49999 9.95001C7.38064 9.95001 7.26618 9.9026 7.18179 9.81821L4.18179 6.81821C4.00605 6.64247 4.00605 6.35755 4.18179 6.18181Z" fill="currentColor"></path></svg></button></li></ul></div></nav></section></header><main data-theme="light" style="background-color:var(--colorNeutralBackground1);overflow-x:hidden;overflow-y:auto;width:100vw;height:calc(100vh - 80px)" id="main"><div class="collection_slug_Root__xztwf style_mainStyle__8eIxs"><div class="style_graphicsPost__36P1T"><h1><a href="#" title="undefined" class="style_titleStyle__6CuPY">Graphics Programming(八) —— 简单动画</a></h1><div style="width:100%;text-align:center;margin:0.5rem auto"><span class="style_aphorism__ue0s6">动画 = 数学计算函数f(时间变量t)</span></div>
<p>如何动起来:</p>
<div class="style_Tab__IjTlz"><div role="expansion" class="style_Expansion__lekPG">时间变量</div>:<div class="style_Tab__IjTlz style_hidden__yfyDi">用shader的动画效果一般是将时间变量加入计算. 以便当时间变化时画面也随之变化<br/>unity所有的内置时间变量都是float4类型
<table><thead><tr><td align="center" colSpan="3" style="font-size:20px">unity内置的时间变量</td></tr></thead><tbody><tr><th>名称</th><th>t的含义</th><th>描述</th></tr><tr><td>_Time</td><td>自该场景加载开始所经过的时间</td><td>(t/20, t, 2t, 3t)</td></tr><tr><td>_SinTime</td><td>时间的正弦值</td><td>(t/8, t/4, t/2, t)</td></tr><tr><td>_CosTime</td><td>时间的余弦值</td><td>(t/8, t/4, t/2, t)</td></tr><tr><td>unity_DeltaTime</td><td>时间的增量</td><td>(t, 1/t, smooth(t), 1/smooth(t))</td></tr></tbody></table></div><br/></div>
<p></p>
<p>纹理动画:</p>
<div class="style_Tab__IjTlz"><div role="expansion" class="style_Expansion__lekPG">序列帧动画</div>:<div class="style_Tab__IjTlz style_hidden__yfyDi">序列帧动画(Image Sequence Animation): 通过播放连续的序列帧来实现动画<br/>注意: unity中纹理坐标竖直方向顺序(从下到上逐渐增大)和通常序列帧顺序(从上到下)相反.</div><br/><div role="expansion" class="style_Expansion__lekPG">滚动背景</div>:<div class="style_Tab__IjTlz style_hidden__yfyDi">滚动背景通常使用多个layer来模拟视差</div><br/></div>
<p></p>
<p>顶点动画:</p>
<div class="style_Tab__IjTlz"><div role="expansion" class="style_Expansion__lekPG">注意事项</div>:<div class="style_Tab__IjTlz style_hidden__yfyDi">顶点动画往往不得不在SubShader中写&quot;DisableBatching&quot;=&quot;True&quot;标签来强制取消批处理, 但增加Draw Call.<br/>其中最应避免的是利用模型空间下的绝对位置和方向计算, <span class="style_Quote__dLoMM" id="#1">应尽量使用其它方式代替</span>.<br/>顶点动画的物体添加阴影也需要自己提供ShadowCaster Pass.</div><br/><div role="expansion" class="style_Expansion__lekPG">河流</div>:<div class="style_Tab__IjTlz style_hidden__yfyDi">河流模拟通常使用正弦函数模拟水流波动</div><br/><div role="expansion" class="style_Expansion__lekPG">广告牌技术</div>:<div class="style_Tab__IjTlz style_hidden__yfyDi">广告牌技术(Billboarding): 根据视角旋转特定对象, 使得该对象总是面对摄像机<br/>本质为构建旋转矩阵. 该矩阵的基通常为: 表面法线, 上方向单位向量, 右方向单位向量. 且需要锚点保持物体位置不变<br/>而三个基向量通常不垂直. 但实现时至少有一个是固定的.<br/>假设表面法线固定(粒子效果等): 计算: normalized(right = up x normal); 修正: up = normal x right</div><br/></div><div id="Comment" class="style_Comment__GsBhh"></div></div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"matter":{"title":"Graphics Programming(八) —— 简单动画","tags":["graphics"],"index":8},"absPath":"/home/runner/work/blog/blog/renderer/mdx/graphics/simpleAnimation.mdx","type":"mdx","slug":["simpleAnimation"],"collection":"graphics","url":"/graphics/simpleAnimation"},"compiled":{"content":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst title = \"Graphics Programming(八) —— 简单动画\", tags = [\"graphics\"], index = 8;\nconst QuoteList = [\"例如在广告牌技术中, 为避免使用模型空间来作锚点, 可以利用顶点颜色来存储每个顶点到锚点的距离值\"];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\"\n  }, props.components), {Aphorism, Tab, Expansion, Table, Quote} = _components;\n  if (!Aphorism) _missingMdxReference(\"Aphorism\", true);\n  if (!Expansion) _missingMdxReference(\"Expansion\", true);\n  if (!Quote) _missingMdxReference(\"Quote\", true);\n  if (!Tab) _missingMdxReference(\"Tab\", true);\n  if (!Table) _missingMdxReference(\"Table\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(Aphorism, {\n      children: \"动画 = 数学计算函数f(时间变量t)\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"如何动起来:\"\n    }), \"\\n\", _jsxs(Tab, {\n      children: [_jsx(Expansion, {\n        children: \"时间变量\"\n      }), \":\", _jsxs(Tab, {\n        expan: true,\n        children: [\"用shader的动画效果一般是将时间变量加入计算. 以便当时间变化时画面也随之变化\", _jsx(\"br\", {}), \"unity所有的内置时间变量都是float4类型\\n\", _jsx(Table, {\n          title: \"unity内置的时间变量\",\n          children: [{\n            cells: [\"名称\", \"t的含义\", \"描述\"],\n            component: ['th', 'th', 'th']\n          }, {\n            cells: [\"_Time\", \"自该场景加载开始所经过的时间\", \"(t/20, t, 2t, 3t)\"]\n          }, {\n            cells: [\"_SinTime\", \"时间的正弦值\", \"(t/8, t/4, t/2, t)\"]\n          }, {\n            cells: [\"_CosTime\", \"时间的余弦值\", \"(t/8, t/4, t/2, t)\"]\n          }, {\n            cells: [\"unity_DeltaTime\", \"时间的增量\", \"(t, 1/t, smooth(t), 1/smooth(t))\"]\n          }]\n        })]\n      })]\n    }), \"\\n\", _jsx(\"p\", {}), \"\\n\", _jsx(_components.p, {\n      children: \"纹理动画:\"\n    }), \"\\n\", _jsxs(Tab, {\n      children: [_jsx(Expansion, {\n        children: \"序列帧动画\"\n      }), \":\", _jsxs(Tab, {\n        expan: true,\n        children: [\"序列帧动画(Image Sequence Animation): 通过播放连续的序列帧来实现动画\", _jsx(\"br\", {}), \"注意: unity中纹理坐标竖直方向顺序(从下到上逐渐增大)和通常序列帧顺序(从上到下)相反.\"]\n      }), _jsx(Expansion, {\n        children: \"滚动背景\"\n      }), \":\", _jsx(Tab, {\n        expan: true,\n        children: \"滚动背景通常使用多个layer来模拟视差\"\n      })]\n    }), \"\\n\", _jsx(\"p\", {}), \"\\n\", _jsx(_components.p, {\n      children: \"顶点动画:\"\n    }), \"\\n\", _jsxs(Tab, {\n      children: [_jsx(Expansion, {\n        children: \"注意事项\"\n      }), \":\", _jsxs(Tab, {\n        expan: true,\n        children: [\"顶点动画往往不得不在SubShader中写\\\"DisableBatching\\\"=\\\"True\\\"标签来强制取消批处理, 但增加Draw Call.\", _jsx(\"br\", {}), \"其中最应避免的是利用模型空间下的绝对位置和方向计算, \", _jsx(Quote, {\n          id: \"#1\",\n          children: \"应尽量使用其它方式代替\"\n        }), \".\", _jsx(\"br\", {}), \"顶点动画的物体添加阴影也需要自己提供ShadowCaster Pass.\"]\n      }), _jsx(Expansion, {\n        children: \"河流\"\n      }), \":\", _jsx(Tab, {\n        expan: true,\n        children: \"河流模拟通常使用正弦函数模拟水流波动\"\n      }), _jsx(Expansion, {\n        children: \"广告牌技术\"\n      }), \":\", _jsxs(Tab, {\n        expan: true,\n        children: [\"广告牌技术(Billboarding): 根据视角旋转特定对象, 使得该对象总是面对摄像机\", _jsx(\"br\", {}), \"本质为构建旋转矩阵. 该矩阵的基通常为: 表面法线, 上方向单位向量, 右方向单位向量. 且需要锚点保持物体位置不变\", _jsx(\"br\", {}), \"而三个基向量通常不垂直. 但实现时至少有一个是固定的.\", _jsx(\"br\", {}), \"假设表面法线固定(粒子效果等): 计算: normalized(right = up x normal); 修正: up = normal x right\"]\n      })]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = props.components || ({});\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  title,\n  tags,\n  index,\n  QuoteList,\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","toc":[]},"overview":[{"length":21,"name":"archive"},{"length":15,"name":"graphics"},{"length":1,"name":"math"},{"length":8,"name":"network"}]},"__N_SSG":true},"page":"/[collection]/[...slug]","query":{"collection":"graphics","slug":["simpleAnimation"]},"buildId":"meNayWSLCpwIRBFSyCCZM","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>