<!DOCTYPE html><html lang="cn"><head><meta charSet="UTF-8"/><title>第六章 | Network</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="第六章 | Network"/><meta name="description" content="Personal Blog"/><meta property="og:description" content="Personal Blog"/><meta property="og:type" content="website"/><meta property="twitter:card" content="summary_large_image"/><link rel="icon" type="image/x-icon" href="/favicon.ico"/><meta name="next-head-count" content="9"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/blog/_next/static/css/188c649415dfc8d9.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/188c649415dfc8d9.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/c7fd63396ea487eb.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/c7fd63396ea487eb.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/blog/_next/static/chunks/webpack-6965b024cefed38b.js" defer=""></script><script src="/blog/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/blog/_next/static/chunks/main-2917097014419c1d.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-ff17d0cfb1e0c0c9.js" defer=""></script><script src="/blog/_next/static/chunks/29107295-661baa9a9eae34db.js" defer=""></script><script src="/blog/_next/static/chunks/814c6784-d7d96a807e1f8484.js" defer=""></script><script src="/blog/_next/static/chunks/664-8af8765c6fed5950.js" defer=""></script><script src="/blog/_next/static/chunks/121-83baa50662375b7d.js" defer=""></script><script src="/blog/_next/static/chunks/675-c1479de6d423831c.js" defer=""></script><script src="/blog/_next/static/chunks/460-e203ea15416d29fa.js" defer=""></script><script src="/blog/_next/static/chunks/pages/%5Bcollection%5D/%5B...slug%5D-c0d0afc2721512e7.js" defer=""></script><script src="/blog/_next/static/GujXVfjJPlpqFjoE7Nx1v/_buildManifest.js" defer=""></script><script src="/blog/_next/static/GujXVfjJPlpqFjoE7Nx1v/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header data-theme="dark" class="style_nav-root__yUsZa" style="height:80px"><section class="style_nav-section__SjkNQ"><a class="style_nav-logo__UiRaj" href="/blog"><h3>Allen Lee@Blog</h3></a><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="style_nav-menus__wdzNT"><div style="position:relative"><ul data-orientation="horizontal" dir="ltr"><li><button class="style_btn__g6gfm style_subtle__UH7MW style_nav-trigger__QiQTA" id="radix-:Rj6:-trigger-radix-:Rjj6:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rj6:-content-radix-:Rjj6:" data-radix-collection-item="">Overview <svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 15 15" aria-hidden="true" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.18179 6.18181C4.35753 6.00608 4.64245 6.00608 4.81819 6.18181L7.49999 8.86362L10.1818 6.18181C10.3575 6.00608 10.6424 6.00608 10.8182 6.18181C10.9939 6.35755 10.9939 6.64247 10.8182 6.81821L7.81819 9.81821C7.73379 9.9026 7.61934 9.95001 7.49999 9.95001C7.38064 9.95001 7.26618 9.9026 7.18179 9.81821L4.18179 6.81821C4.00605 6.64247 4.00605 6.35755 4.18179 6.18181Z" fill="currentColor"></path></svg></button></li></ul></div></nav></section></header><main data-theme="light" style="background-color:var(--colorNeutralBackground1);overflow-x:hidden;overflow-y:auto;width:100vw;height:calc(100vh - 80px)" id="main"><div class="collection_slug_Root__qGxja"><div class="styles_netPost__2AMMk" style="max-width:960px;font-family:YaHei, Helvetica, arial, sans-serif;font-size:16px"><h1>第六章</h1><p>从链路层协议上看，所有设备都是一个<strong>节点</strong>，通信路径上相邻节点的通信信道称为<strong>链路</strong></p>
<p>链路层大多数是在**网络适配器(network adapter, 有时称为网络接口卡(Network Inerface Card, NIC))**中实现，因此大多功能由硬件实现，但也有少部分由 CPU(软件)实现</p>
<p>链路层使用<strong>循环冗余检测编码(Cyclic Redundancy Check, CRC, 有时也被称为多项式编码(polynomial code))<strong>来做到</strong>比特级差错检测和纠正(bit-level error detection and correction)</strong></p>
<p>链路层使用**媒体访问控制协议(Medium Access Control, MAC)**来规定帧在链路上的传输规则</p>
<h2 id="多路访问链路及其协议">多路访问链路及其协议<a rel="noopener noreferrer external nofollow" target="_blank" href="#多路访问链路及其协议" class="anchor after" aria-hidden="true" aria-label="permalink" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" focusable="false"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a></h2>
<p><strong>广播链路(broadcast link)<strong>使得多个发送和接收节点能连接到相同单一的共享的广播信道上，其使用</strong>多路访问协议(multiple access protocol)<strong>处理信号</strong>碰撞(collide, 即同时收到多个帧而必须丢弃)</strong></p>
<p>多路访问协议可以划分为 3 种类型</p>
<ul>
<li>信道划分协议，如<strong>时分多路复用(TDM)<strong>和</strong>频分多路复用(FDM)</strong>、<strong>码分多址(CDMA)</strong></li>
<li>随机接入协议，如<!-- -->
<ul>
<li><strong>ALOHA 协议簇</strong>：纯 ALOHA、时隙 ALOHA</li>
<li><strong>CSMA 协议簇</strong>：载波监听多路访问(Carrier Sense Multiple Access, CSMA)、具有碰撞检测的 CSMA(CSMA/CD)</li>
</ul>
</li>
<li>轮流协议，<!-- -->
<ul>
<li><strong>轮询协议簇</strong>：802.15 协议、蓝牙协议</li>
<li><strong>令牌传递协议簇</strong>：光纤分布式数据接口协议(FDDI)、IEEE 802.5 令牌环协议</li>
</ul>
</li>
</ul>
<h2 id="交换局域网">交换局域网<a rel="noopener noreferrer external nofollow" target="_blank" href="#交换局域网" class="anchor after" aria-hidden="true" aria-label="permalink" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" focusable="false"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a></h2>
<p>网络适配器(端系统和路由器上有, 交换机上没有)具有链路层地址，其地址通常被称为 LAN 地址、物理地址或 MAC 地址</p>
<p>**地址解析协议(Address Resolution Protocol, ARP)**负责转换 IP 地址和 MAC 地址，由端系统和路由器的 ARP 表负责维护和创建映射关系</p>
<p>**集线器(hub)**的作用只是重新生成比特，将其能量强度放大并向其他所有接口传输
</p>
<figure role="figure"><span class="resp-image-wrapper" style="display:flex;align-items:center;justify-content:center;position:relative"><a target="_blank" rel="noopener" style="display:block" href="/blog/images/network/ethernet_frame.webp"><img crossorigin="anonymous" alt="ethernet_frame" loading="lazy" width="487" height="114" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http%3A//www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 487 114&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage preserveAspectRatio=&#x27;none&#x27; filter=&#x27;url(%23b)&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; height=&#x27;100%25&#x27; width=&#x27;100%25&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABCAIAAAB2XpiaAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAFUlEQVR4nGP4/PGdrDi/soyov4sNACShBDkmDfoeAAAAAElFTkSuQmCC&#x27;/%3E%3C/svg%3E&quot;)" src="/blog/images/network/ethernet_frame.webp"/></a></span><figcaption role="figcaption">ethernet_frame</figcaption></figure>
<ul>
<li>前同步码(8 字节)，前 7 字节用于同步时钟，第 8 字节的两个比特用于指示有效数据</li>
<li>目的地址(6 字节)，包含目的适配器的 MAC 地址</li>
<li>类型(2 字节)，指示上层协议类型</li>
<li>数据(46~1500 字节)，多余分片，少则填充</li>
<li>CRX(4 字节)，循环冗余检测数据</li>
</ul>
<p>以太网向网络层提供面向无连接的、不可靠的服务</p>
<p>以太网标准为 IEEE 802.3 CSMA/CD(Ethernet)</p>
<p>在基于交换机的以太局域网中不会有碰撞，因此不需要 MAC 协议</p>
<p>交换机的任务是接收入链路层帧并转发到出链路，作用是转发和过滤</p>
<p>交换机使用**交换机表(switch table)**处理转发，其表的生成是<em>自学习</em>的</p></div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"matter":{"date":"2018-01-28","title":"第六章","tags":["network"],"index":6},"absPath":"/home/runner/work/blog/blog/renderer/mdx/network/sixth.mdx","type":"mdx","slug":["sixth"],"collection":"network","url":"/network/sixth"},"compiled":{"content":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst date = \"2018-01-28\", title = \"第六章\", tags = [\"network\"], index = 6;\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    strong: \"strong\",\n    h2: \"h2\",\n    a: \"a\",\n    svg: \"svg\",\n    path: \"path\",\n    ul: \"ul\",\n    li: \"li\",\n    img: \"img\",\n    em: \"em\"\n  }, props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"从链路层协议上看，所有设备都是一个\", _jsx(_components.strong, {\n        children: \"节点\"\n      }), \"，通信路径上相邻节点的通信信道称为\", _jsx(_components.strong, {\n        children: \"链路\"\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"链路层大多数是在**网络适配器(network adapter, 有时称为网络接口卡(Network Inerface Card, NIC))**中实现，因此大多功能由硬件实现，但也有少部分由 CPU(软件)实现\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"链路层使用\", _jsxs(_components.strong, {\n        children: [\"循环冗余检测编码(Cyclic Redundancy Check, CRC, 有时也被称为多项式编码(polynomial code))\", _jsx(_components.strong, {\n          children: \"来做到\"\n        }), \"比特级差错检测和纠正(bit-level error detection and correction)\"]\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"链路层使用**媒体访问控制协议(Medium Access Control, MAC)**来规定帧在链路上的传输规则\"\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"多路访问链路及其协议\",\n      children: [\"多路访问链路及其协议\", _jsx(_components.a, {\n        className: \"anchor after\",\n        \"aria-hidden\": true,\n        \"aria-label\": \"permalink\",\n        tabIndex: \"-1\",\n        href: \"#多路访问链路及其协议\",\n        children: _jsx(_components.svg, {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          viewBox: \"0 0 16 16\",\n          focusable: \"false\",\n          children: _jsx(_components.path, {\n            d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\",\n            fillRule: \"evenodd\"\n          })\n        })\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsxs(_components.strong, {\n        children: [\"广播链路(broadcast link)\", _jsx(_components.strong, {\n          children: \"使得多个发送和接收节点能连接到相同单一的共享的广播信道上，其使用\"\n        }), \"多路访问协议(multiple access protocol)\", _jsx(_components.strong, {\n          children: \"处理信号\"\n        }), \"碰撞(collide, 即同时收到多个帧而必须丢弃)\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"多路访问协议可以划分为 3 种类型\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"信道划分协议，如\", _jsxs(_components.strong, {\n          children: [\"时分多路复用(TDM)\", _jsx(_components.strong, {\n            children: \"和\"\n          }), \"频分多路复用(FDM)\"]\n        }), \"、\", _jsx(_components.strong, {\n          children: \"码分多址(CDMA)\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"随机接入协议，如\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ALOHA 协议簇\"\n            }), \"：纯 ALOHA、时隙 ALOHA\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"CSMA 协议簇\"\n            }), \"：载波监听多路访问(Carrier Sense Multiple Access, CSMA)、具有碰撞检测的 CSMA(CSMA/CD)\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"轮流协议，\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"轮询协议簇\"\n            }), \"：802.15 协议、蓝牙协议\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"令牌传递协议簇\"\n            }), \"：光纤分布式数据接口协议(FDDI)、IEEE 802.5 令牌环协议\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"交换局域网\",\n      children: [\"交换局域网\", _jsx(_components.a, {\n        className: \"anchor after\",\n        \"aria-hidden\": true,\n        \"aria-label\": \"permalink\",\n        tabIndex: \"-1\",\n        href: \"#交换局域网\",\n        children: _jsx(_components.svg, {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          viewBox: \"0 0 16 16\",\n          focusable: \"false\",\n          children: _jsx(_components.path, {\n            d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\",\n            fillRule: \"evenodd\"\n          })\n        })\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"网络适配器(端系统和路由器上有, 交换机上没有)具有链路层地址，其地址通常被称为 LAN 地址、物理地址或 MAC 地址\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"**地址解析协议(Address Resolution Protocol, ARP)**负责转换 IP 地址和 MAC 地址，由端系统和路由器的 ARP 表负责维护和创建映射关系\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"**集线器(hub)**的作用只是重新生成比特，将其能量强度放大并向其他所有接口传输\\n\"\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"/images/network/ethernet_frame.webp\",\n      alt: \"ethernet_frame\",\n      width: \"487\",\n      height: \"114\",\n      sizes: \"(max-width: 487px) 100vw, 114px\",\n      blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABCAIAAAB2XpiaAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAFUlEQVR4nGP4/PGdrDi/soyov4sNACShBDkmDfoeAAAAAElFTkSuQmCC\",\n      placeholder: \"blur\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"前同步码(8 字节)，前 7 字节用于同步时钟，第 8 字节的两个比特用于指示有效数据\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"目的地址(6 字节)，包含目的适配器的 MAC 地址\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"类型(2 字节)，指示上层协议类型\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"数据(46~1500 字节)，多余分片，少则填充\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"CRX(4 字节)，循环冗余检测数据\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"以太网向网络层提供面向无连接的、不可靠的服务\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"以太网标准为 IEEE 802.3 CSMA/CD(Ethernet)\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"在基于交换机的以太局域网中不会有碰撞，因此不需要 MAC 协议\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"交换机的任务是接收入链路层帧并转发到出链路，作用是转发和过滤\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"交换机使用**交换机表(switch table)**处理转发，其表的生成是\", _jsx(_components.em, {\n        children: \"自学习\"\n      }), \"的\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = props.components || ({});\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  date,\n  title,\n  tags,\n  index,\n  default: MDXContent\n};\n","toc":[{"depth":2,"value":"多路访问链路及其协议","id":"多路访问链路及其协议"},{"depth":2,"value":"交换局域网","id":"交换局域网"}]},"overview":[{"length":21,"name":"archive"},{"length":15,"name":"graphics"},{"length":1,"name":"math"},{"length":8,"name":"network"}]},"__N_SSG":true},"page":"/[collection]/[...slug]","query":{"collection":"network","slug":["sixth"]},"buildId":"GujXVfjJPlpqFjoE7Nx1v","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>